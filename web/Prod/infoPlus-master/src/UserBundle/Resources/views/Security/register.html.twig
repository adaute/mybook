{% if success is defined %}
    <div class="alert alert-success">
        {{ 'user.registration.success'|trans }}
    </div>
{% endif %}

{{ form_start(form, { attr: { novalidate: 'novalidate' } }) }}

    <fieldset>
        <legend><i class="fa fa-lock"></i> {{ 'user.registration.label' | trans  }} </legend>

        <div class="form-group">
            <label for="username">{{ 'user.registration.username' | trans  }} :</label>
            {{ form_errors(form.username) }}
            {{ form_widget(form.username, { 'attr': {'class': 'form-control' }}) }}
        </div>

        <div class="form-group">
            <label for="email">{{ 'user.registration.email' | trans  }} :</label>
            {{ form_errors(form.email) }}
            {{ form_widget(form.email, { 'attr': {'class': 'form-control' }}) }}
        </div>

        <div class="form-group">
            <label for="firstName">{{ 'user.registration.firstName' | trans  }} :</label>
            {{ form_errors(form.firstName) }}
            {{ form_widget(form.firstName, { 'attr': {'class': 'form-control' }}) }}
        </div>

        <div class="form-group">
            <label for="lastName">{{ 'user.registration.lastName' | trans  }} :</label>
            {{ form_errors(form.lastName) }}
            {{ form_widget(form.lastName, { 'attr': {'class': 'form-control' }}) }}
        </div>

        <div class="form-group">
            <label for="password">{{ 'user.registration.password' | trans  }} :</label>
            {{ form_errors(form.password.password) }}
            {{ form_widget(form.password.password, { 'attr': {'class': 'form-control' }}) }}
        </div>

        <div class="form-group">
            <label for="confirm">{{ 'user.registration.confirm' | trans  }} :</label>
            {{ form_errors(form.password.confirm) }}
            {{ form_widget(form.password.confirm, { 'attr': {'class': 'form-control' }}) }}
        </div>

        <div class="form-group">
            {{ form_errors(form.cguRead) }}
            {{ form_widget(form.cguRead) }}
            <label for="confirm" data-toggle="modal" data-target="#myModal">{{ 'user.registration.cguRead' | trans  }} <u>{{ 'user.registration.cguLink' | trans  }}</u></label>
        </div>

        {{ form_widget(form.recaptcha, { 'attr': {
            'options' : {
                'theme': 'light',
                'type': 'image',
                'size': 'normal'
            },
        } }) }}
        <br>

        {{ form_row(form.register) }}

    </fieldset>

    {{ form_row(form._token) }}

    {{ form_end(form) }}

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">CGU</h4>
            </div>
            <div class="modal-body">
                {{ render(controller('UserBundle:User:usagesCondition')) }}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>